{% extends "base.html" %}

{% block title %}Planes de Suscripci贸n - Traductor Quechua Wanka{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
        <div class="p-6 sm:p-10">
            <div class="flex items-center mb-6">
                <i class="fas fa-hand-holding-usd text-3xl text-indigo-600 mr-4"></i>
                <h1 class="text-3xl font-bold text-gray-800">Planes de Suscripci贸n</h1>
            </div>
            
            <div class="mb-8">
                <p class="text-gray-600">
                    Suscr铆bete al Traductor Quechua Wanka para acceder a nuestra extensa colecci贸n de palabras
                    en quechua con pronunciaci贸n aut茅ntica. Tu suscripci贸n ayuda a preservar y difundir este
                    importante patrimonio cultural inmaterial.
                </p>
                
                {% if has_subscription %}
                <div class="mt-4 bg-green-50 p-4 rounded-lg border border-green-200">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-check-circle text-green-500"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-green-800">Ya tienes una suscripci贸n activa</h3>
                            <div class="mt-2 text-sm text-green-700">
                                <p>Tu suscripci贸n al plan {{ subscription.plan_name }} est谩 activa hasta el {{ subscription.end_date.strftime('%d/%m/%Y') }}.</p>
                                <a href="{{ url_for('manage_subscription') }}" class="font-medium underline hover:text-green-600 transition-colors">
                                    Gestionar mi suscripci贸n
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <!-- Planes de suscripci贸n -->
            <div class="grid md:grid-cols-1 gap-8">
                {% for plan in plans %}
                <div class="border border-indigo-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                    <div class="bg-indigo-50 p-6">
                        <h3 class="text-2xl font-bold text-indigo-800">{{ plan.name }}</h3>
                        <div class="mt-2 flex items-baseline">
                            <span class="text-4xl font-extrabold text-indigo-600">S/ {{ "%.2f"|format(plan.price) }}</span>
                            <span class="ml-1 text-xl text-indigo-500">/a帽o</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-6">{{ plan.description }}</p>
                        <ul class="space-y-3 mb-6">
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span class="text-gray-700">Acceso ilimitado al traductor</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span class="text-gray-700">Pronunciaciones aut茅nticas</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span class="text-gray-700">B煤squedas ilimitadas</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span class="text-gray-700">Soporte por email</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check text-green-500 mr-2"></i>
                                <span class="text-gray-700">Pago con Yape disponible</span>
                            </li>
                        </ul>
                        
                        <!-- Botones condicionales seg煤n el estado del usuario -->
                        {% if has_subscription %}
                            <button disabled class="w-full bg-gray-300 text-white font-medium py-3 rounded-lg cursor-not-allowed">
                                Ya tienes una suscripci贸n activa
                            </button>
                        {% else %}
                            <!-- Verificar si el usuario est谩 logueado -->
                            {% if session.get('user_id') %}
                                <a href="{{ url_for('subscription_checkout', plan_id=plan.id) }}" class="block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition-colors">
                                    <i class="fas fa-mobile-alt mr-2"></i> Suscribirme con Yape
                                </a>
                            {% else %}
                                <!-- Si no est谩 logueado, redirigir al login -->
                                <a href="{{ url_for('login', next=url_for('subscription_checkout', plan_id=plan.id)) }}" class="block w-full text-center bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition-colors">
                                    <i class="fas fa-sign-in-alt mr-2"></i> Iniciar sesi贸n y suscribirme
                                </a>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Secci贸n para usuarios no registrados -->
            {% if not session.get('user_id') %}
            <div class="mt-12 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-8 border border-indigo-100">
                <div class="text-center">
                    <div class="text-4xl mb-4"></div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">驴Nuevo en nuestro traductor?</h3>
                    <p class="text-gray-600 mb-6 max-w-2xl mx-auto">
                        Para acceder a todas las funciones del traductor necesitas crear una cuenta y suscribirte. 
                        Es r谩pido, seguro y te dar谩 acceso completo a nuestro diccionario de quechua Wanka.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <a href="{{ url_for('register') }}" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-8 rounded-lg transition-colors">
                            <i class="fas fa-user-plus mr-2"></i> Crear cuenta gratis
                        </a>
                        <a href="{{ url_for('login') }}" class="bg-white hover:bg-gray-50 text-indigo-600 border border-indigo-200 font-medium py-3 px-8 rounded-lg transition-colors">
                            <i class="fas fa-sign-in-alt mr-2"></i> Ya tengo cuenta
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- FAQ -->
            <div class="mt-12">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Preguntas frecuentes</h2>
                
                <div class="space-y-6">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-2">驴Qu茅 incluye mi suscripci贸n?</h3>
                        <p class="text-gray-600">
                            Tu suscripci贸n te da acceso completo a todas las palabras y pronunciaciones en quechua Wanka 
                            disponibles en nuestra plataforma. Podr谩s buscar t茅rminos, escuchar su pronunciaci贸n aut茅ntica 
                            y acceder a todas las funciones del traductor.
                        </p>
                    </div>
                    
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-2">驴C贸mo puedo pagar con Yape?</h3>
                        <p class="text-gray-600">
                            El proceso es muy sencillo: despu茅s de seleccionar tu plan, te mostraremos las instrucciones 
                            para realizar el pago por Yape al n煤mero 968 680 379. Solo necesitas subir tu voucher y 
                            nosotros validaremos tu pago para activar tu suscripci贸n.
                        </p>
                    </div>
                    
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-2">驴C贸mo puedo cancelar mi suscripci贸n?</h3>
                        <p class="text-gray-600">
                            Puedes cancelar tu suscripci贸n en cualquier momento desde tu cuenta en la secci贸n "Gestionar 
                            suscripci贸n". La cancelaci贸n ser谩 efectiva al finalizar tu per铆odo de facturaci贸n actual, 
                            por lo que podr谩s seguir utilizando el servicio hasta esa fecha.
                        </p>
                    </div>
                    
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-2">驴Ofrecen reembolsos?</h3>
                        <p class="text-gray-600">
                            Si no est谩s satisfecho con tu suscripci贸n, puedes solicitar un reembolso dentro de los 
                            primeros 14 d铆as desde la fecha de compra. Para solicitar un reembolso, por favor 
                            contacta a nuestro equipo de soporte.
                        </p>
                    </div>
                    
                    <div class="pb-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-2">驴Con qu茅 frecuencia se actualiza el contenido?</h3>
                        <p class="text-gray-600">
                            Nuestro equipo trabaja constantemente en la ampliaci贸n del vocabulario disponible. 
                            Regularmente a帽adimos nuevas palabras, frases y pronunciaciones para enriquecer nuestra 
                            base de datos y ofrecerte la mejor experiencia posible.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}